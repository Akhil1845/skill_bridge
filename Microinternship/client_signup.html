<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Animated Client Login & Register</title>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; color:#fff; }
body { display:flex; justify-content:center; align-items:center; min-height:100vh; background:#25252b; }
.container { position:relative; width:950px; height:550px; border:2px solid #ff8c00; box-shadow:0 0 30px #ff8c00; overflow:hidden; border-radius:12px; }
/* ... all your existing styles remain unchanged ... */
</style>
</head>
<body>

<div class="container">
    <div class="curved-shape"></div>
    <div class="curved-shape2"></div>

    <!-- LOGIN FORM -->
    <div class="form-box Login">
        <h2 class="animation" style="--D:0; --S:21">Client Login</h2>
        <form id="loginForm">
            <div class="input-box animation" style="--D:1; --S:22">
                <input type="email" id="loginEmail" required placeholder="Email">
                <label>Email</label>
            </div>
            <div class="input-box animation" style="--D:2; --S:23">
                <input type="password" id="loginPassword" required placeholder="Password">
                <label>Password</label>
                <i class='bx bx-show toggle-password'></i>
            </div>
            <div class="social-login animation" style="--D:3; --S:24">
                <button type="button" class="social-btn" id="googleLogin"><i class='bx bxl-google'></i></button>
                <button type="button" class="social-btn" id="githubLogin"><i class='bx bxl-github'></i></button>
                <button type="button" class="social-btn" id="linkedinLogin"><i class='bx bxl-linkedin-square'></i></button>
            </div>
            <div class="input-box animation" style="--D:4; --S:25">
                <button class="btn" type="submit">Login</button>
            </div>
            <div class="regi-link animation" style="--D:5; --S:26">
                <p>Don't have an account? <a href="#" class="SignUpLink">Sign Up</a></p>
            </div>
        </form>
    </div>

    <!-- LOGIN INFO -->
    <div class="info-content Login">
        <h2 class="animation" style="--D:0; --S:20">WELCOME BACK!</h2>
        <p class="animation" style="--D:1; --S:21">Manage your projects and connect with students.</p>
    </div>

    <!-- REGISTER FORM -->
    <div class="form-box Register">
        <h2 class="animation" style="--li:17; --S:0">Client Registration</h2>
        <form id="registerForm">
            <div class="input-box animation" style="--li:18; --S:1">
                <input type="text" id="companyName" required placeholder="Company Name">
                <label>Company Name</label>
            </div>
            <div class="input-box animation" style="--li:19; --S:2">
                <input type="email" id="registerEmail" required placeholder="Email">
                <label>Email</label>
            </div>
            <div class="input-box animation" style="--li:20; --S:3">
                <input type="password" id="registerPassword" required placeholder="Password">
                <label>Password</label>
                <i class='bx bx-show toggle-password'></i>
            </div>
            <div class="social-login animation" style="--li:21; --S:4">
                <button type="button" class="social-btn" id="googleRegister"><i class='bx bxl-google'></i></button>
                <button type="button" class="social-btn" id="githubRegister"><i class='bx bxl-github'></i></button>
                <button type="button" class="social-btn" id="linkedinRegister"><i class='bx bxl-linkedin-square'></i></button>
            </div>
            <div class="input-box animation" style="--li:22; --S:5">
                <button class="btn" type="submit">Register</button>
            </div>
            <div class="regi-link animation" style="--li:23; --S:6">
                <p>Already have an account? <a href="#" class="SignInLink">Sign In</a></p>
            </div>
        </form>
    </div>

    <!-- REGISTER INFO -->
    <div class="info-content Register">
        <h2 class="animation" style="--li:17; --S:0">WELCOME!</h2>
        <p class="animation" style="--li:18; --S:1">Register your company and access top talent.</p>
    </div>
</div>

<script type="module">
import { CONFIG } from './config.js'; // <-- using your config.js

const BASE_URL = CONFIG.API_BASE;
const container = document.querySelector('.container');
const LoginLink = document.querySelector('.SignInLink');
const RegisterLink = document.querySelector('.SignUpLink');

// Toggle forms
RegisterLink.addEventListener('click', ()=> container.classList.add('active'));
LoginLink.addEventListener('click', ()=> container.classList.remove('active'));

// Password toggle
document.querySelectorAll('.toggle-password').forEach(icon => {
    icon.addEventListener('click', () => {
        const input = icon.closest('.input-box').querySelector('input');
        if(input.type === "password"){ 
            input.type="text"; 
            icon.classList.replace('bx-show','bx-hide'); 
        } else { 
            input.type="password"; 
            icon.classList.replace('bx-hide','bx-show'); 
        }
    });
});

// Login form
document.getElementById("loginForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const email = document.getElementById("loginEmail").value.trim();
    const password = document.getElementById("loginPassword").value.trim();
    try {
        const response = await fetch(`${BASE_URL}/clients/login`, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ email, password })
        });
        if(!response.ok) throw new Error(await response.text() || "Login failed");
        const client = await response.json();
        localStorage.setItem('clientId', client.id);
        localStorage.setItem('clientName', client.company || client.companyName || client.name || "Client");
        localStorage.setItem('clientEmail', client.email);
        window.location.href = "client_dashboard.html";
    } catch(err){
        alert("❌ Login failed: "+err.message);
    }
});

// Register form
document.getElementById("registerForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const companyName = document.getElementById("companyName").value.trim();
    const email = document.getElementById("registerEmail").value.trim();
    const password = document.getElementById("registerPassword").value.trim();
    try {
        const response = await fetch(`${BASE_URL}/clients`, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ companyName, email, password })
        });
        if(!response.ok) throw new Error(await response.text() || "Registration failed");
        const client = await response.json();
        localStorage.setItem('clientId', client.id);
        localStorage.setItem('clientName', client.company || client.companyName || client.name || "Client");
        localStorage.setItem('clientEmail', client.email);
        window.location.href = "client_dashboard.html";
    } catch(err){
        alert("❌ Registration failed: "+err.message);
    }
});

// Social login alerts
document.querySelectorAll('.social-btn').forEach(btn => btn.addEventListener('click', ()=> alert("Social login not configured")));
</script>
</body>
</html>
